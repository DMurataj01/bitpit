# Specify the version being used as well as the language
cmake_minimum_required(VERSION 2.8)

string(TOUPPER ${CMAKE_PROJECT_NAME} FIND_MODULE_FILENAME)
set(FIND_MODULE_FILENAME "Find${FIND_MODULE_FILENAME}.cmake")

string(TOUPPER "${PATCHMAN_LIBRARY}" FIND_MODULE_PACKAGE)
set(FIND_MODULE_NAME "${PATCHMAN_LIBRARY}")
set(FIND_MODULE_REFERENCE_HEADER "${PATCHMAN_LIBRARY}_version.hpp")
set(FIND_MODULE_DEPENDENCIES "PABLO")

configure_file("${FIND_MODULE_FILENAME}.in" "${FIND_MODULE_FILENAME}" @ONLY )

add_custom_target(clean-cmake COMMAND ${CMAKE_MAKE_PROGRAM} clean WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR})

install(FILES "${CMAKE_CURRENT_BINARY_DIR}/${FIND_MODULE_FILENAME}" DESTINATION "${BITPIT_DIR}/cmake/Modules")
install(FILES "LibFindMacros.cmake" DESTINATION "${BITPIT_DIR}/cmake/Modules")
